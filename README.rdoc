= Redmine Tx Advanced Tracker

== 프로젝트 개요

이 플러그인은 Redmine의 기본 Tracker(유형) 모델에 추가 속성을 부여하여 일감의 성격을 더 세밀하게 분류하고 활용할 수 있게 합니다.

=== 문제점과 해결책

*기존 문제점:*
* Redmine의 기본 Tracker에는 "Is in roadmap" 플래그만 존재
* 일감의 다양한 성격(버그, 지원, 패치노트 등)을 구분하기 어려움
* 특정 유형의 일감을 프로그래밍적으로 필터링하거나 다르게 처리하기 어려움

*해결책:*
* Tracker 모델에 추가 플래그 필드를 제공
* 유형별 판단 메소드를 제공하여 다른 플러그인에서 쉽게 활용 가능

== 추가된 Tracker 속성

=== 1. is_in_roadmap (기본 Redmine 속성)

로드맵에 표시될 일감 유형인지 구분합니다.

*사용 예시:*
* 기능, 개선사항 등 주요 작업은 로드맵에 표시
* 내부 작업이나 기술 부채는 로드맵에서 제외

=== 2. is_sidejob (지원)

메인 작업이 아닌 지원 업무를 구분합니다.

*사용 예시:*
* 다른 팀 지원, 문의 응대, 간단한 설정 변경
* 리소스 계획 시 메인 작업과 구분하여 집계

=== 3. is_bug (버그)

버그 수정 작업을 구분합니다.

*사용 예시:*
* 버그 통계 및 리포트 생성
* QA 프로세스 적용
* 우선순위 자동 조정

=== 4. is_patchnote (패치노트)

릴리즈 노트나 패치노트에 포함될 일감을 구분합니다.

*사용 예시:*
* 자동 릴리즈 노트 생성
* 고객 공지사항 작성

=== 5. is_exception (예외)

간트차트, 타임라인 등 시각화에서 제외할 일감 유형을 구분합니다.

*사용 예시:*
* 문서 작업, 회의록 등 일정 관리가 불필요한 작업
* 간트차트를 깔끔하게 유지

== API 사용법

=== Tracker 클래스 메소드

```ruby
# 유형 ID로 속성 확인
Tracker.is_in_roadmap?(tracker_id)  # 로드맵에 표시되는가?
Tracker.is_sidejob?(tracker_id)     # 지원 업무인가?
Tracker.is_bug?(tracker_id)         # 버그인가?
Tracker.is_patchnote?(tracker_id)   # 패치노트인가?
Tracker.is_exception?(tracker_id)   # 예외 처리 대상인가?

# 특정 속성을 가진 모든 유형 ID 목록
Tracker.bug_trackers_ids        # 버그 유형 ID 배열
Tracker.sidejob_trackers_ids    # 지원 유형 ID 배열
Tracker.roadmap_trackers_ids    # 로드맵 유형 ID 배열
Tracker.exception_trackers_ids  # 예외 유형 ID 배열
```

=== TxAdvancedTrackerHelper 메소드

```ruby
# 헬퍼를 통한 직접 접근
TxAdvancedTrackerHelper.is_in_roadmap?(tracker_id)
TxAdvancedTrackerHelper.is_bug?(tracker_id)
TxAdvancedTrackerHelper.is_sidejob?(tracker_id)
TxAdvancedTrackerHelper.is_patchnote?(tracker_id)
TxAdvancedTrackerHelper.is_exception?(tracker_id)

# 캐시된 전체 유형 목록
TxAdvancedTrackerHelper.all_trackers  # 5분간 캐시됨
```

== 실제 사용 예제

=== redmine_tx_milestone 플러그인에서의 사용 사례

1. *간트차트에서 예외 유형 제외*

  # 예외 유형은 간트차트 라인 표시 안함
  show_line = !Tracker.is_exception?(issue.tracker_id) && issue.due_date.present?

2. *버그 유형만 필터링*

  # 버그 이슈만 조회
  bug_ids = Tracker.bug_trackers_ids
  bug_issues = Issue.where(tracker_id: bug_ids)

3. *지원 업무와 메인 작업 구분*

  # 메인 작업 (버그, 지원 제외)
  major_issues = issues.reject { |i| 
    Tracker.is_bug?(i.tracker_id) || Tracker.is_sidejob?(i.tracker_id) 
  }
  
  # 지원 업무
  support_issues = issues.select { |i| Tracker.is_sidejob?(i.tracker_id) }
  
  # 버그 (QA)
  qa_issues = issues.select { |i| Tracker.is_bug?(i.tracker_id) }

4. *로드맵 유형만 집계*

  # 로드맵에 표시되는 주요 작업만
  roadmap_tracker_ids = Tracker.roadmap_trackers_ids
  main_issues = Issue.where(tracker_id: roadmap_tracker_ids)

5. *간트차트 경고 표시 조건*

  # 예외 유형이 아니고 완료되지 않은 이슈만 경고
  show_warning = !Tracker.is_exception?(issue.tracker_id) && 
                 issue.due_date.nil? && 
                 !issue.is_implemented?

== 다른 플러그인에서 활용하기

=== 권장 사용 패턴

1. *리소스 계획*

  # 메인 작업만 집계
  main_work = issues.reject { |i| 
    Tracker.is_sidejob?(i.tracker_id) || Tracker.is_exception?(i.tracker_id)
  }

2. *버그 리포트*

  # 버그 통계
  bug_count = Issue.where(tracker_id: Tracker.bug_trackers_ids)
                   .where('created_on >= ?', Date.today.beginning_of_month)
                   .count

3. *릴리즈 노트 생성*

  # 패치노트에 포함될 이슈만
  patchnote_issues = version.fixed_issues.select { |i| 
    Tracker.is_patchnote?(i.tracker_id) 
  }

4. *타임라인 필터링*

  # 시각화에 표시할 이슈 (예외 제외)
  visible_issues = issues.reject { |i| Tracker.is_exception?(i.tracker_id) }

5. *작업 분류*

  # 유형별 분류
  work_types = {
    main: issues.select { |i| Tracker.is_in_roadmap?(i.tracker_id) },
    bugs: issues.select { |i| Tracker.is_bug?(i.tracker_id) },
    support: issues.select { |i| Tracker.is_sidejob?(i.tracker_id) },
    docs: issues.select { |i| Tracker.is_exception?(i.tracker_id) }
  }

== 아키텍처

=== 데이터베이스 변경

  # Migration: 1_add_flags_to_tracker.rb
  # trackers 테이블에 다음 컬럼 추가 (모두 boolean, 기본값 false)
  add_column :trackers, :is_sidejob, :boolean
  add_column :trackers, :is_bug, :boolean
  add_column :trackers, :is_patchnote, :boolean
  add_column :trackers, :is_exception, :boolean

=== 주요 파일

* *init.rb*: 플러그인 초기화
* *lib/tx_advanced_tracker_helper.rb*: 헬퍼 메소드 및 캐싱
* *lib/tx_advanced_tracker_patch.rb*: Tracker 모델 패치
* *lib/tx_advanced_tracker_hook.rb*: 뷰 훅
* *db/migrate/1_add_flags_to_tracker.rb*: 데이터베이스 마이그레이션

=== 성능 최적화

Tracker 목록은 5분간 캐시됩니다:

  # TxAdvancedTrackerHelper.all_trackers
  # 5분마다 자동으로 새로고침되는 캐시

== 설정 방법

1. 관리 > 일감 유형(Tracker) 메뉴로 이동
2. 각 Tracker를 편집하여 해당하는 플래그 체크
   * "로드맵에 표시" (is_in_roadmap) - 기본 Redmine 속성
   * "지원" (is_sidejob)
   * "버그" (is_bug)
   * "패치노트" (is_patchnote)
   * "예외" (is_exception)

== 의존성

이 플러그인은 독립적으로 작동하며 다른 플러그인에 의존하지 않습니다.

== 개발 가이드라인

=== 코드 스타일
* Ruby on Rails 규칙을 따릅니다
* 주석은 한국어로 작성되어 있습니다

=== 테스트

  # Redmine 루트 디렉토리에서 실행
  bundle exec rake test:plugins:redmine_tx_advanced_tracker

== 작성자

Author: KiHyun Kang
